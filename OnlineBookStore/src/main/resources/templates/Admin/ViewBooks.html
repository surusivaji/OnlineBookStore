<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{Admin/Base::layout(~{::section})}">
	<head>
		<meta charset="UTF-8">
		<title>E-Book Management System | Display Books</title>
	</head>
	<body>
		<section class="mt-2">
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-12">
						<div class="card">
							<div class="card-head p-2">
								<h3 class="text-center text-danger fw-bold">Display Books</h3>
							</div>
							<div class="card-body table-responsive">
								<!-- ALERT MESSAGE STARTS -->
								<div class="alert alert-success" th:if="${session.successMsg}">
									<p class="text-center fw-bold">[[${session.successMsg}]] ðŸ˜ŠðŸ˜ŠðŸ˜Š</p>
									<th:block th:text="${@helper.removeSessionMessage()}"></th:block>
								</div>
								<div class="alert alert-danger" th:if="${session.failMsg}">
									<p class="text-center fw-bold">[[${session.failMsg}]] ðŸ˜¡ðŸ˜¡ðŸ˜¡</p>
									<th:block th:text="${@helper.removeSessionMessage()}"></th:block>
								</div>
								<div class="alert alert-warning" th:if="${session.warningMsg}">
									<p class="text-center fw-bold">[[${session.warningMsg}]]</p>
									<th:block th:text="${@helper.removeSessionMessage()}"></th:block>
								</div>
								<!-- ALERT MESSAGE ENDS -->
								<table class="table">
									<tr class="table-dark">
										<th>Id</th>
										<th>Image</th>
										<th>Book Name</th>
										<th>Author</th>
										<th>Price</th>
										<th>Category</th>
										<th>Status</th>
										<th>Action</th>
									</tr>
									<tr th:each="book : ${books}">
										<td th:text="${book.id}"></td>
										<td><img th:src="@{'/images/books/'+${book.bookPhoto}}" alt="book" height="50px" width="50px" class="img-fluid"/></td>
										<td th:text="${book.bookName}"></td>
										<td th:text="${book.authorName}"></td>
										<td th:text="${book.price}"></td>
										<td th:text="${book.bookCategory}"></td>
										<td th:text="${book.bookStatus}"></td>
										<td>
											<a th:href="@{'/admin/editBook/'+${book.id}}" class="btn btn-primary btn-sm"> <i class="fa-solid fa-pen-to-square"></i> Edit</a>
											<a th:href="@{'/admin/deleteBook/'+${book.id}}" class="btn btn-danger btn-sm"> <i class="fa-solid fa-trash-can"></i> Delete</a>
										</td>
									</tr>
								</table>
								<div class="d-flex justify-content-center">
									<nav aria-label="Page navigation example">
									  <ul class="pagination">
									    <li class="page-item" th:if="${currentPage!=0}">
									      <a class="page-link" th:href="@{'/admin/viewBooks?pageNo='+${currentPage-1}}" aria-label="Previous">
									        <span aria-hidden="true">&laquo;</span>
									        <span class="sr-only">Previous</span>
									      </a>
									    </li>
									    <li class="page-item" th:each="page : ${#numbers.sequence(1, totalPages)}" th:classappend="${currentPage==page-1 ? 'active' : ''}">
									    	<a class="page-link" th:href="@{'/admin/viewBooks?pageNo='+${page-1}}" th:text="${page}"></a>
									    </li>
									    <li class="page-item" th:if="${currentPage+1!=totalPages}">
									      <a class="page-link" th:href="@{'/admin/viewBooks?pageNo='+${currentPage+1}}" aria-label="Next">
									        <span aria-hidden="true">&raquo;</span>
									        <span class="sr-only">Next</span>
									      </a>
									    </li>
									  </ul>
									</nav>
								</div>
								<p class="fw-bold">Total Books: <span th:text="${totalBooks}"></span></p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</body>
</html>